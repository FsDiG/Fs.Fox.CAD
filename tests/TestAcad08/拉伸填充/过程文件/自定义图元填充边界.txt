拉伸填充bug:
1号: 不闭合的多段线,新建边界会丢失一个不和头点重叠的倒数第二个点.
与头点重叠是ok的
闭合是ok的
解决:因为倒数第二个点要从 curve.EndPoint 获取.

2号:
如果画了一个矩形,然后填充,再删除边界,再点选填充,那么通过生成出来关联标注,
移动第一个点的时候,是没有响应的,移动第二次的时候才会响应.

两种想法解决这个问题,
a:生成之后,用移动矩阵影响一下关联反应器.
   答:不会触发的,即使我分成两个事务分别提交.
b:先克隆一个填充,再创建关联边界.
  答:可行的,但是会导致3号问题的发生.

3号:
由于我是生成填充的,所以在在位编辑的时候会在长事务内部:

【贵妃】惊惊 2019/7/13 17:52:02
我遇到了一个问题,如果是在位编辑的时候,当前空间是模型空间,那么我用函数克隆一个块外的东西到模型空间,实际上会克隆到在位编辑的内部...
我都不知道怎么处理这个情况了..莫非要关闭用户的在位编辑状态么..

【才人】edata 2019/7/13 17:57:15
在位编辑是这样的.

【贵妃】惊惊 2019/7/13 17:58:08
那桌子是怎么控制在位编辑-减出去块外的?

【才人】edata 2019/7/13 17:58:20
在位编辑实际上是对当前空间的修改,然后移动回块定义..

【才人】edata 2019/7/13 17:58:44
这个就不是很清楚了...

【贵妃】惊惊 2019/7/13 17:58:47
也就是长事务上面记录了要移动回去的id?
如果减选了就是剔除了id?

【才人】edata 2019/7/13 17:59:27
你能卡到这个长事务吗?

【贵妃】惊惊 2019/7/13 17:59:39
net貌似无法控制长事务呀
应该桌子有考虑到的,只是我还没有挖出来具体怎么处理的..

【才人】edata 2019/7/13 18:08:59
用命令去移除当前在位编辑.

我用了命令去移除块外的填充和边界,这样操作是可行的,
然后又产生了一个问题,如果是块内的填充,我并不想减去.
想法: 用命令反应器在在位编辑前获取当前空间所有的图元,然后在位编辑时候就知道两个集合的交叉部分了
答:证明是可以分类出来的,但是会引起一个问题,在位编辑复制的填充id不在任何一个表上.

判断执行的时候不是选择前的填充均执行产生边界(这样就不用复制反应器了
再检测命令 _refset 加减三个集合的填充
但是命令反应器无法检测二级命令,只能通过 lastprompt 获取最后一行命令,判断添加或者删除

命令完成后,执行选择上次选择,便是_refset命令的选择
然后把id改成加减到判断的两个集合中





U 大写命令,用户回滚的时会导致集合信息不符:
之前koz找到的方法,先选择在位编辑命令触发时的所有图元,再选择触发后的所有图元,分别建立两个集合储存,然后进行差集运算,
得出那些是块内图元,这个方法是可行的,然后我发现在使用+加入块内和-减出块内这也都可以判断,
问题就是....如果是使用了U回滚,那么我将不知道如何修改这两个集合....

检测在位编辑命令启动之后,而无结束命令的时候,
期间如果用户使用了u就提示用户是否禁止拉伸填充.

挂载一个图元的反应器,如果使用了命令U,那么判断填充是否被更改了-> ObjectOpenedForModify 反应器
如果更改了,更改方式无法知道?? 可能是改颜色,也可能是会在块内外加减操作更改.
无解决方案!



拉伸非圆的时候,如果中心移动,那么边界不会跟随
发生了拉伸命令的时候,
答: 选择的对象有填充,就克隆填充,并且删除原有的边界,及填充




频闪控制
grips=0




编辑填充
样条曲线边界生成

在cad2008设计一条填充边界
填充边界的自定义图元名称叫做: HatchBoundary
设定HatchBoundary变量,0为使用,1为不使用边界
想法破产:不会自定义图元.



在位编辑的锁定图元的方法,该不是一个隐藏图层导致的吧.
不是,但是在位编辑的时候出现了一个图层 0-RefEdit0